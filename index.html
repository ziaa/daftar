<!DOCTYPE html>
<html lang="fa">
<head>
	<title>دفتر</title>

	<link rel="stylesheet" href="http://daftar.ziaa.ir/theme/css/bootstrap.css" type="text/css" />
	<link rel="stylesheet" href="http://daftar.ziaa.ir/theme/css/bootstrap-rtl.css" type="text/css" />
	<link rel="stylesheet" href="http://daftar.ziaa.ir/theme/css/pygments.css" type="text/css" />
	<link rel="stylesheet" href="http://daftar.ziaa.ir/theme/css/main.css" type="text/css" />
	<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.2.1.min.js"></script>
	<script>
  		$(document).ready(function () {
    		$(".post table").addClass("table table-striped table-condensed table-bordered");
  	  	});
    </script>
	<meta charset="utf-8" />

	<link rel="alternate" href="http://daftar.ziaa.ir/feeds/all.atom.xml" type="application/atom+xml" title="خبرخوان دفتر -یادداشت‌های سید ضیاء الدین عظیمی " />

</head>
<body>
	<div class="wrap">
		<div class="container">
			<div class="banner">
				<a href="http://daftar.ziaa.ir">دفتر</a>
				<h1>یادداشت‌های سید ضیاء الدین عظیمی</h1>
			</div>
<div class="content">
	<div class="posts">
			<div class="post">
				<h3>
					<a href="http://daftar.ziaa.ir/posts/2017/09/A-little-about-ugly-legacy-code-and-refactoring/" title="اندر احوالات کد کثیفی که از گذشته به ما ارث رسیده و بازسازی اون">اندر احوالات کد کثیفی که از گذشته به ما ارث رسیده و بازسازی اون</a>
				</h3>
				<div class="info">
					شنبه 01 مهر 1396
						توسط <a class="url fn" href="http://daftar.ziaa.ir/author/ziaa.html">Ziaa</a>
				</div>
				<div class="content">
					<blockquote>
<p><a href="https://ganjoor.net/saadi/divan/ghazals/sh597/">بسیار سفر باید تا پخته شود خامی</a></p>
</blockquote>
<p>در دنیای برنامه‌نویسی همیشه اینجوری نیست که همه چیز بر وفق مراد باشه؛ درست مثل زندگی.
 مثلا زیاد پیش میاد که به هر دلیلی کارهای یکی از اعضای تیم به تو واگذار میشه. اینجاست که اگه بین اعضای تیم، استاندارد درستی تعریف نشده باشه یا برنامه‌نویس ارشدی وجود نداشته باشه یا وجود داشته اما وظایفش رو به درستی انجام نداده یا مرور کدی<sup id="fnref-Code review"><a class="footnote-ref" href="#fn-Code review">1</a></sup> در کار نباشه یا خود نفر قبلی مسئولیت‌پذیر نبوده یا ضعف آموزش یا به هزاران دلیل ریز و درشت دیگه، کدی به دست شما میرسه که <strong>ناخوانا و شکننده</strong>ست. به هر جاش که دست می‌زنیم یه جای دیگه‌اش بهم می‌خوره و یه باگ دیگه پیدا می‌شه.
هر اسمی می‌خواید  براش بذارید. کد زشت، کثیف، بدبو، اسپاگتی یا هرچیز دیگه‌ای. مهم اینه که شما بتونید این‌ها رو شناسایی و بعد اصلاح کنید.
  در این موقعیت به نظرم بهتره که:</p>
<ul>
<li><strong>خونسردی</strong> خودتون رو حفط کنید (درست مثل توصیه‌های روشنی که برای حوادث طبیعی می‌گن!)</li>
<li>برنامه‌نویس‌های قبلی رو <strong>قضاوت نکنید</strong> چونکه شما در شرایط اونها نبودید و تضمینی وجود نداره که در اون شرایط کار شما بهتر از حالت فعلی از آب در میومد </li>
<li>از اشتباهات نفرات قبلی <strong>درس بگیرید</strong> و سعی کنید شما دیگه تکرارشون نکنید. یه چیزی شبیه «ادب از که آموختی...»</li>
<li><strong>غُر نزنید</strong>. به جای غر زدن به این موضوع به شکل مسئله‌ای نگاه کنید که وظیفه حل کردنش رو به شما سپردن</li>
<li>و در نهایت اینکه <strong>بازسازی و ریفکتور</strong><sup id="fnref-Refactoring"><a class="footnote-ref" href="#fn-Refactoring">2</a></sup> کردن کد رو <a href="https://refactoring.guru/refactoring">یاد بگیرید</a> و با کمک برنامه‌نویس ارشدتر، حتی به اندازه یک خط کد، کدها رو بهبود بدید. تغییرات کوچک بدید و قدم‌های کوچک بردارید.</li>
</ul>
<p>نمیشه نسخه کلی پیچید؛ اما به نظرم بدترین کار اینه که ما هم همون راه نفرات قبلی رو ادامه بدیم. توسعه‌دهندگی صرفا این نیست که یه چیز جدید رو از صفر خودمون شروع کنیم بلکه بهبود هم بخشی از مسیر توسعه است.</p>
<div class="footnote">
<hr>
<ol>
<li id="fn-Code review">
<p>Code review&#160;<a class="footnote-backref" href="#fnref-Code review" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn-Refactoring">
<p>Refactoring&#160;<a class="footnote-backref" href="#fnref-Refactoring" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
</ol>
</div>
				</div>
			</div>
			<div class="post">
				<h3>
					<a href="http://daftar.ziaa.ir/posts/2017/09/How-to-fire-events-from-tsql-code-out-to-sql-server-profiler/" title="اهمیت لاگ‌ها - در کدهای TSQL چه طور اطلاعات مورد نظر رو به SQL Server Profiler بفرستیم؟">اهمیت لاگ‌ها - در کدهای TSQL چه طور اطلاعات مورد نظر رو به SQL Server Profiler بفرستیم؟</a>
				</h3>
				<div class="info">
					جمعه 10 شهریور 1396
						توسط <a class="url fn" href="http://daftar.ziaa.ir/author/ziaa.html">Ziaa</a>
				</div>
				<div class="content">
					<p><a href="https://ganjoor.net/parvin/divanp/mtm/sh126/">هر گُلی، علت و عیبی دارد گُل بی علت و بی عیب، خداست</a></p>
<p>بعضی وقت‌ها برنامه‌هایی که نوشتیم دچار اشکال می‌شن یا بهتره بگم نوشتن نرم‌افزار بدون باگ تقریبا نشدنی است. البته مشخصه که اینجا منظورم از نرم افزار، برنامه‌ای با یکی-دو خط کد نیست! مهم اینه که باگ‌ها رو در زمان مناسب تشخیص داد و به درستی رفع و مدیریت کرد. یکی از مواردی که شناسایی باگ‌ها رو راحت‌تر می‌کنه لاگ‌ها هستن. 
جمله معروفی هست که می‌گه:</p>
<blockquote>
<p>Log early, log often</p>
</blockquote>
<p>در لایه دیتابیس ابزاری که برای شناسایی خطاها و بررسی کارایی کد و پایگاه داده استفاده می‌شه <a href="https://docs.microsoft.com/en-us/sql/tools/sql-server-profiler/sql-server-profiler">SQL Server Profiler</a> هست. 
برای اینکه بتونیم در رویه‌ها<sup id="fnref-Stored procedure"><a class="footnote-ref" href="#fn-Stored procedure">1</a></sup> و تابع‌ها<sup id="fnref-Function"><a class="footnote-ref" href="#fn-Function">2</a></sup> اطلاعات مورد نظر رو به پروفایلر بفرستیم؛ می‌تونیم از <a href="https://docs.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/sp-trace-generateevent-transact-sql">sp_trace_generateevent</a> استفاده کنیم.</p>
<p>این SP سه تا ورودی داره. <code>@eventid</code> و <code>@userinfo</code> و <code>@userdata</code> که از بین اونها فقط <code>@eventid</code> ضروریه. 
این پارامتر به دلخواه خودمون می‌تونه یکی از اعداد ۸۲ تا ۹۱ باشه و برای شناسایی نوع رویداد و فیلتر کردن اونها استفاده میشه.
میشه برای خودمون قرارداد کنیم که هر کدوم از این اعداد نشون دهنده یکی از سطح‌های لاگ‌گیری<sup id="fnref-Logging levels"><a class="footnote-ref" href="#fn-Logging levels">3</a></sup> است.</p>
<ul>
<li>DEBUG</li>
<li>ERROR</li>
<li>FATAL</li>
<li>WARN</li>
<li>INFO</li>
<li>TRACE</li>
</ul>
<p>از اونجایی که لاگ‌ها بدون پیغام مناسب کاربرد کمی دارن؛ برای فرستادن متن پیام‌ها از <code>@userinfo</code> کمک می‌گیریم.</p>
<p>پس در نهایت توی کدهامون چیزی شبیه کد زیر داریم:</p>
<div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">PROCEDURE</span><span class="w"> </span><span class="o">[</span><span class="n">dbo</span><span class="o">]</span><span class="p">.</span><span class="o">[</span><span class="n">usp_TraceSandbox</span><span class="o">]</span><span class="w"> </span><span class="nv">@Param</span><span class="w"> </span><span class="k">AS</span><span class="w"> </span><span class="nc">NVARCHAR</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span><span class="w"></span>
<span class="k">AS</span><span class="w"></span>
<span class="w">    </span><span class="k">BEGIN</span><span class="w"> </span><span class="k">TRY</span><span class="w"></span>

<span class="w">        </span><span class="k">DECLARE</span><span class="w"> </span><span class="nv">@info</span><span class="w"> </span><span class="nc">NVARCHAR</span><span class="p">(</span><span class="mi">128</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">SET</span><span class="w"> </span><span class="nv">@info</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">N</span><span class="s1">&#39;Info: @param = &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nv">@Param</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="c1">-- Log اطلاعات</span>
<span class="w">        </span><span class="k">EXEC</span><span class="w"> </span><span class="n">master</span><span class="p">..</span><span class="n">sp_trace_generateevent</span><span class="w"> </span><span class="nv">@eventid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">82</span><span class="p">,</span><span class="w"> </span><span class="nv">@userinfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">@info</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="k">THROW</span><span class="w"> </span><span class="mi">51010</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="s1">&#39;مثلا یه خطایی اتفاق افتاده!&#39;</span><span class="p">,</span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">END</span><span class="w"> </span><span class="k">TRY</span><span class="w"></span>
<span class="w">    </span><span class="k">BEGIN</span><span class="w"> </span><span class="k">CATCH</span><span class="w"></span>

<span class="w">        </span><span class="k">DECLARE</span><span class="w"> </span><span class="nv">@error</span><span class="w"> </span><span class="nc">NVARCHAR</span><span class="p">(</span><span class="mi">128</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">SET</span><span class="w"> </span><span class="nv">@error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">N</span><span class="s1">&#39;Error: &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nf">ERROR_MESSAGE</span><span class="p">();</span><span class="w"></span>

<span class="w">        </span><span class="c1">-- Log خطاها</span>
<span class="w">        </span><span class="k">EXEC</span><span class="w"> </span><span class="n">master</span><span class="p">..</span><span class="n">sp_trace_generateevent</span><span class="w"> </span><span class="nv">@eventid</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">83</span><span class="p">,</span><span class="w"> </span><span class="nv">@userinfo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nv">@error</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">END</span><span class="w"> </span><span class="k">CATCH</span><span class="p">;</span><span class="w"></span>
<span class="k">GO</span><span class="w"></span>
</pre></div>


<p>برای اینکه بتونیم این اطلاعات رو  در پروفایلر ببینیم، رویدادهای مورد نظرمون رو از بخش User configurable انتخاب می‌کنیم.
همتای هر کدوم از پارامترها در جدول زیر مشخص شدن.</p>
<table>
<thead>
<tr>
<th>sp_trace_generateevent</th>
<th>SQL Server Profiler</th>
</tr>
</thead>
<tbody>
<tr>
<td>@eventid 82-91</td>
<td>User configurable 0-9</td>
</tr>
<tr>
<td>@userinfo</td>
<td>TextData</td>
</tr>
<tr>
<td>@userdata</td>
<td>BinaryData</td>
</tr>
</tbody>
</table>
<p><img alt="SQL Server Profiler configs" src="http://daftar.ziaa.ir/posts/2017/09/How-to-fire-events-from-tsql-code-out-to-sql-server-profiler/SQL-Server-Profiler-Captures-sp_trace_generateevent-Events.PNG"></p>
<p>و در نهایت وقتی که مشغول ردگیری خطاها شدیم و پروفایلر رو اجرا کردیم داده‌های مورد نظرمون رو می‌بینیم.
<img alt="Trace" src="http://daftar.ziaa.ir/posts/2017/09/How-to-fire-events-from-tsql-code-out-to-sql-server-profiler/SQL-Server-Profiler-Trace.PNG"></p>
<div class="footnote">
<hr>
<ol>
<li id="fn-Stored procedure">
<p>Stored procedure&#160;<a class="footnote-backref" href="#fnref-Stored procedure" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn-Function">
<p>Function&#160;<a class="footnote-backref" href="#fnref-Function" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn-Logging levels">
<p>Logging levels&#160;<a class="footnote-backref" href="#fnref-Logging levels" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
</ol>
</div>
				</div>
			</div>
			<div class="post">
				<h3>
					<a href="http://daftar.ziaa.ir/posts/2017/01/Create_and_populate_Persian_date_dimension_to_be_used_in_OLAP_Cubes/" title="ساختن بُعد تاریخ شمسی برای استفاده در Cube">ساختن بُعد تاریخ شمسی برای استفاده در Cube</a>
				</h3>
				<div class="info">
					سه شنبه 05 بهمن 1395
						توسط <a class="url fn" href="http://daftar.ziaa.ir/author/ziaa.html">Ziaa</a>
				</div>
				<div class="content">
					<p><img alt="DimPersianDate" src="http://daftar.ziaa.ir/posts/2017/01/Create_and_populate_Persian_date_dimension_to_be_used_in_OLAP_Cubes/Cube_DimPersianDate.PNG"></p>
<p>همان‌طور که می‌دانید در مباحث مربوط به هوش تجاری (BI)، یکی از پرکاربردترین  عناصر برای گزارش‌گیری‌های سریع، تلفیقی و چندبعدی OLAP Cubeها هستند (اگر نمی‌دانید، این متن برای شما کاربردی ندارد. وقت ارزشمند خود را تلف نکنید!). معمولاً در Cubeها <strong>بُعد تاریخ (Date dimension)</strong> یکی از اصلی‌ترین ابعاد است و در اکثر گزارش‌ها به آن نیاز خواهد شد.</p>
<p>برای ایجاد بُعد تاریخ با تاریخ‌های شمسی می‌توان ابتدا تابعی برای تبدیل تاریخ میلادی به شمسی در SQL Server نوشت. سپس با استفاده از این تابع، جدول تاریخ‌ها در انبارداده (Data Warehouse) را برای بازه‌ی زمانیِ خاصی ایجاد کرد.</p>
<h3>تابع تبدیل میلادی به شمسی در SQL Server</h3>
<p>برای این کار «چرخ را دوباره اختراع نمی‌کنیم» و از کد <a href="http://rastan.parsiblog.com/Posts/381">این وبلاگ</a> و البته <a href="http://mamehdi.parsiblog.com/Posts/1">نسخه سریع‌تر</a> آن (پی‌نوشت هفتم) برای ایجاد  <a href="https://github.com/ziaa/SqlPersianDateDimension/blob/master/GregorianToJalali.sql">تابع <code>GregorianToJalali</code></a> استفاده می‌کنیم. در عین حال <a href="https://github.com/ziaa/SqlPersianDateDimension/issues">مشکلات و باگ‌های این کد</a> را می‌دانیم.</p>
<h3>ایجاد روال (Stored Procedure) برای پرکردن بُعد تاریخ در انبار داده</h3>
<p>در اینجا <a href="https://github.com/ziaa/SqlPersianDateDimension/blob/master/spPopulatePersianDateDimension.sql">روال <code>spPopulatePersianDateDimension</code></a> را ایجاد می‌کنیم تا جدولی با عنوان <code>PersianDateDimension</code> در انبارداده ما ایجاد کند (اگر از قبل وجود نداشت) و سپس با توجه به ورودی روال، این جدول را با تاریخ‌های شمسی و میلادی متناظر برای <em>یک بازه زمانی خاص</em> پُر کند.</p>
<p>این روال، همه تاریخ‌های شمسی و میلادی بین تاریخ شروع <code>‪@FromDate‬</code> و پایان <code>‪@ToDate‬</code> را در جدول <code>PersianDateDimension</code>  وارد می‌کند. همان طور که در کد <a href="https://github.com/ziaa/SqlPersianDateDimension/blob/874230cbcd91c736f53cd7666022b439a8130364/spPopulatePersianDateDimension.sql#L28-L43">مشخص است</a> ستون‌هایی مانند «روز هفته (<code>GregorianDayNumberOfWeek</code> و <code>PersianDayNumberOfWeek</code>)» و «روز  سال (<code>GregorianDayNumberOfYear</code> و <code>PersianDayNumberOfYear</code>)» و ... نیز در این جدول وارد می‌شود که این موارد معمولاً در گزارش‌های جزئی‌تر مورد استفاده قرار می‌گیرند.</p>
<h3>پر کردن بُعد تاریخ برای یک بازه زمانی</h3>
<p>پس از ایجاد روال می‌توانیم با توجه به تاریخ‌های موجود در سایر داده‌ها و ابعاد (مثلاً مشتریان، محصولات، فروشندگان و ...) برای بازه‌ی معقولی بُعد تاریخ را ایجاد کنیم.</p>
<div class="highlight"><pre><span></span>EXECUTE dbo.spPopulatePersianDateDimension @FromDate = &#39;2016-1-1&#39;, @ToDate = &#39;2017-1-1&#39;
</pre></div>


<p>کار تمام است و شما می‌توانید این بُعد را برای سایر مکعب‌های خود نیز استفاده کنید.</p>
				</div>
			</div>
			<div class="post">
				<h3>
					<a href="http://daftar.ziaa.ir/posts/2016/12/Using-Pelican-static-site-generator-part2-changing-theme-converting-dates-to-Jalali/" title="راهنمای استفاده از سایت‌ساز پلیکان - بخش دوم - تغییر قالب و تبدیل تاریخ نوشته‌ها از میلادی به شمسی">راهنمای استفاده از سایت‌ساز پلیکان - بخش دوم - تغییر قالب و تبدیل تاریخ نوشته‌ها از میلادی به شمسی</a>
				</h3>
				<div class="info">
					شنبه 13 آذر 1395
						توسط <a class="url fn" href="http://daftar.ziaa.ir/author/ziaa.html">Ziaa</a>
				</div>
				<div class="content">
					<p>در بخش قبل، خلاصه‌وار به <a href="http://daftar.ziaa.ir/posts/2016/11/Using-Pelican-static-site-generator-part1-installation">نصب و ایجاد یک وبلاگ آزمایشی با استفاده از سایت ساز پلیکان</a> اشاره کردم. در این بخش، روش تغییر قالب و تبدیل تاریخ مطالب از میلادی به شمسی را ذکر خواهم کرد.</p>
<p>برای پلیکان <a href="https://github.com/getpelican/pelican-themes">قالب‌های مختلفی</a> ایجاد شده است. شما به راحتی می‌توانید با نگاهی به آنها و قالب ساده‌ای مثل <a href="https://github.com/getpelican/pelican/tree/master/pelican/themes/simple/templates">simple</a> و مستندات <a href="http://jinja.pocoo.org">jinja</a> قالب دلخواه خود را <a href="http://docs.getpelican.com/en/stable/themes.html">ایجاد کنید.</a> اگر به قالب راست-به-چپ و مناسب نوشته‌های فارسی نیاز دارید می‌توانید از <a href="https://github.com/ziaa/Pelican-RTL-theme">Pelican-RTL-theme</a> استفاده کنید. این قالب برگرفته از <a href="https://github.com/sobhe/pelican-sobhe">کار خوب تیم سُبحه</a> است.</p>
<h3>روش تغییر قالب</h3>
<p>بهتر است پوشه‌ای با نام دلخواه مثلا <code>themes</code> برای نگهداری قالب‌های وبلاگ خود در نظر بگیرید. سپس به هر روشی که دوست دارید؛ فایل‌های مورد نیاز هر قالب را به این پوشه انتقال دهید. مثلا می‌توانید به یکی از روش‌های زیر عمل کنید:</p>
<p>۱. کپی کردن مخزن قالب</p>
<div class="highlight"><pre><span></span>git clone https://github.com/ziaa/Pelican-RTL-theme.git themes/Pelican-RTL-theme
</pre></div>


<p>۲. اضافه کردن قالب به عنوان submodule</p>
<div class="highlight"><pre><span></span>git submodule add -b master https://github.com/ziaa/Pelican-RTL-theme.git themes/Pelican-RTL-theme
</pre></div>


<p>در مرحله بعد باید مسیر قالب مورد نظر را در فایل تنظیمات پلیکان <code>pelicanconf.py</code> وارد کنید.</p>
<div class="highlight"><pre><span></span>#Theme

THEME = &#39;مسیر/Pelican-RTL-theme&#39; 
</pre></div>


<p>همچنین بجای این کار می‌توانید در هنگام تهیه خروجی‌های استاتیک سایت، مسیر قالب را مشخص کنید.</p>
<div class="highlight"><pre><span></span>pelican content -s pelicanconf.py -t path/to/themes/Pelican-RTL-theme
</pre></div>


<h3>روش فارسی کردن تاریخ نوشته‌ها</h3>
<p>یکی از قابلیت‌های سایت ساز پلیکان امکان <a href="http://docs.getpelican.com/en/stable/plugins.html">نوشتن پلاگین‌های دلخواه</a> برای آن است. شما می‌توانید فهرستی از پلاگین‌های موجود را در <a href="https://github.com/getpelican/pelican-plugins">اینجا</a> مشاهده کنید. 
برای فارسی کردن تاریخ‌ مطالب می‌توانید از پلاگین <a href="https://github.com/ziaa/pelican_persian_date">Pelican Persian date</a> استفاده کنید. برای استفاده از آن ابتدا بهتر است پوشه‌ای با نام دلخواه (مثلا <code>plugins</code>) برای نگهداری پلاگین‌ها ایجاد کنید. سپس به هر روشی که دوست دارید فایل‌های پلاگین را در این پوشه قرار دهید. مثلا می‌توانید از یکی از روش‌های زیر استفاده کنید:</p>
<div class="highlight"><pre><span></span>git clone https://github.com/ziaa/pelican_persian_date.git plugins/pelican_persian_date
</pre></div>


<div class="highlight"><pre><span></span>git submodule add -b master https://github.com/ziaa/pelican_persian_date.git plugins/pelican_persian_date
</pre></div>


<p>در مرحله بعد باید مسیر پوشه <code>plugins</code> و پلاگین‌های فعال را در فایل تنظیمات پلیکان <code>pelicanconf.py</code> مشخص کنید. برای اینکار خطوط زیر را به آن اضافه کنید.</p>
<div class="highlight"><pre><span></span># Plugins
PLUGIN_PATHS = [&#39;مسیر/plugins&#39;]
PLUGINS = [&quot;pelican_persian_date&quot;]
</pre></div>


<p>اگر می‌خواهید شکل خروجی تاریخ‌ها را کنترل کنید، این خطوط را به فایل <code>pelicanconf.py</code> اضافه کنید.</p>
<div class="highlight"><pre><span></span>DATE_FORMATS = {
    &#39;fa&#39;: &#39;%A %d %B %Y&#39;
}
</pre></div>


<p>با این کار می‌توانید مشخص کنید که تاریخ‌های فارسی به چه شکلی نمایش داده شود. مثلا <em>شنبه ۱۳ آذر ۱۳۹۵</em> یا <em>۱۳۹۵/۰۹/۱۳</em> یا هر شکل دلخواه دیگری. برای آشنایی با انواع فرمت‌ها از این <a href="https://docs.python.org/3.4/library/datetime.html?highlight=datetime#strftime-and-strptime-behavior">لینک</a> کمک بگرید.</p>
<p>در نهایت خروجی وبلاگ را دوباره بسازید و از قالب و تاریخ فارسی لذت ببرید!</p>
<div class="highlight"><pre><span></span>pelican content
</pre></div>
				</div>
			</div>
			<div class="post">
				<h3>
					<a href="http://daftar.ziaa.ir/posts/2016/11/Using-Pelican-static-site-generator-part1-installation/" title="راهنمای استفاده از سایت‌ساز پلیکان - بخش اول - نصب و راه‌اندازی اولیه">راهنمای استفاده از سایت‌ساز پلیکان - بخش اول - نصب و راه‌اندازی اولیه</a>
				</h3>
				<div class="info">
					سه شنبه 09 آذر 1395
						توسط <a class="url fn" href="http://daftar.ziaa.ir/author/ziaa.html">Ziaa</a>
				</div>
				<div class="content">
					<p>اگه علاقه دارید که سایت یا وبلاگ خودتان را با ابزارهایی که سایت استاتیک ایجاد می‌کنند، درست کنید؛ <a href="http://getpelican.com">پلیکان</a> یکی از <a href="https://www.staticgen.com/">چندین گزینه‌ای</a> است که شما در اختیار دارید. چرخه استفاده از این سایت‌سازها تقریبا شبیه به هم است:</p>
<ol>
<li>write</li>
<li>build</li>
<li>publish</li>
</ol>
<p>شما نوشته مورد نظرتان را می‌نویسید، خروجی html را سایت‌ساز برای‌تان ایجاد می‌کند و در نهایت این خروجی را در هاست خود قرار می‌دهید. البته مشخص است که یک برنامه‌نویس فقط مطلب مورد نظر را می‌نویسد و با ابزارها و کدهای مختلف بقیه مراحل را به کامپیوتر واگذار می‌کند. تا حد امکان ما دوست داریم کارها <strong>خودکار</strong> انجام شوند!</p>
<p>در اینجا به صورت <strong>خلاصه</strong> راهنمای اولیه نصب پلیکان و ایجاد وبلاگ اولیه با استفاده از آن را می‌نویسم. توجه کنید که این مطلب صرفاً یک <strong>یادداشت</strong> است. برای راهنمای کامل به <a href="http://docs.getpelican.com">مستندات پلیکان</a> مراجعه کنید.</p>
<ul>
<li>
<p>نصب پایتون</p>
<ul>
<li>Python 2.7.x+ یا Python 3.3+</li>
</ul>
</li>
<li>
<p>نصب مدیر بسته‌های پایتون pip</p>
</li>
<li>اگر در ویندوز از Python 2.7.9 یا بالاتر و Python 3.4 یا بالاتر استفاده می‌کنید؛ pip قبلاً نصب شده و گرنه باید آن‌را <a href="https://pip.pypa.io/en/stable/installing.html">نصب کنید</a>.</li>
<li>برای نصب pip در اوبونتو <a href="https://packaging.python.org/guides/installing-using-linux-tools/#installing-pip-setuptools-wheel-with-linux-package-managers">(راهنمای نصب در سایر توزیع‌های لینوکس)</a></li>
</ul>
<div class="highlight"><pre><span></span>sudo apt-get install python-pip
</pre></div>


<ul>
<li>برای به روز رسانی pip در ویندوز</li>
</ul>
<div class="highlight"><pre><span></span>python -m pip install --upgrade pip
</pre></div>


<ul>
<li>به روز رسانی pip در توزیع‌های لینوکس</li>
</ul>
<div class="highlight"><pre><span></span>pip install --upgrade pip
</pre></div>


<p>در صورت نیاز استفاده از <a href="https://virtualenv.pypa.io/en/stable/userguide/">virtualenv</a> برای ایزوله کردن محیط توسعه و بسته‌های پایتون. <a href="https://askubuntu.com/questions/244641/how-to-set-up-and-use-a-virtual-python-environment-in-ubuntu">(راهنمای نصب در اوبونتو)</a></p>
<div class="highlight"><pre><span></span>sudo apt install virtualenv
virtualenv ~/virtualenvs/pelican
cd ~/virtualenvs/pelican
source bin/activate

# Do what ever you want
# example: pip install pelican
# And after you&#39;ve done your job, deactivate virtualenv
deactivate
</pre></div>


<ul>
<li>نصب پلیکان</li>
</ul>
<div class="highlight"><pre><span></span>pip install pelican
</pre></div>


<ul>
<li>نصب Markdown‌ (در صورتیکه می‌خواهید نوشته‌ها را با مارک‌داون بنویسید)</li>
</ul>
<div class="highlight"><pre><span></span>pip install Markdown
</pre></div>


<ul>
<li>ساختن پوشه سایت و ایجاد ساختار اولیه</li>
</ul>
<div class="highlight"><pre><span></span>mkdir your-project-folder
cd your-project-folder
pelican-quickstart
</pre></div>


<ul>
<li>پاسخ‌گویی به سوالات (جواب‌های پیش‌فرض در براکت [] نوشته شده)</li>
</ul>
<div class="highlight"><pre><span></span>...
&gt; What is your time zone? [Europe/Paris] Asia/Tehran
...
</pre></div>


<ul>
<li>نوشتن اولین مطلب در یک فایل md و در پوشه content</li>
</ul>
<div class="highlight"><pre><span></span>Title: سلام دنیا!
Slug: Hello-World
Date: 2015-07-21 23:20
Category: Test
Tags: Test

سلام دنیا!
</pre></div>


<ul>
<li>ساختن فایل‌های استاتیک وبلاگ (خروجی‌ها در پوشه output)</li>
</ul>
<div class="highlight"><pre><span></span>pelican content
</pre></div>


<ul>
<li>راه‌اندازی سرور local</li>
</ul>
<div class="highlight"><pre><span></span>cd output
python -m pelican.server
</pre></div>


<p>الان وبلاگ با قالب پیش‌فرض ساخته شده و از طریق آدرس <code>http://localhost:8000</code> قابل دسترسی است. در بخش‌های بعدی به <a href="http://daftar.ziaa.ir/posts/2016/12/Using-Pelican-static-site-generator-part2-changing-theme-converting-dates-to-Jalali">تغییر قالب، فارسی‌سازی</a> و قرار دادن وبلاگ روی گیت‌هاب اشاره خواهم کرد.</p>
				</div>
			</div>
	</div>
<p class="paginator">
    صفحه 1 / 2
        <a href="http://daftar.ziaa.ir/index2.html">&raquo;</a>
</p>
</div>
		</div>
		<div class="push"></div>
	</div>
	<div class="footer">
		<div class="container">
			<hr/>
				<ul class="nav nav-pills pull-right">
				  <li><a href="http://daftar.ziaa.ir/archives.html">بایگانی</a></li>
				  <li><a href="http://daftar.ziaa.ir/feeds/all.atom.xml">خبرخوان</a> </li>
				</ul>
		</div>
	</div>
    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-66952661-2']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = 'https://ssl.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
</body>
</html>